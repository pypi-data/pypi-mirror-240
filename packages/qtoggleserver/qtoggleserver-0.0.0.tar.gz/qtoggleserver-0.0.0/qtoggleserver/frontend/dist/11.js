(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{170:function(t,e,n){"use strict";n.r(e);var o=n(2),r=n(0),a=n(4),l=n(7),i=n(8),u=n(22),c=n(3),s=n(11),f=n(71),d=n(160),m=n(74),h=n(61);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(){return(v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function w(t,e,n){return e&&O(t.prototype,e),n&&O(t,n),t}function C(t,e,n){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function j(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=P(t);if(e){var r=P(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return F(this,n)}}function F(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k=function(t){j(n,t);var e=V(n);function n(t){var o=v({},t);return g(this,n),e.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){x(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({fields:[new f.a({name:"portId",label:Object(r.a)("Port"),required:!0,onChange:function(t,e){return e._updateFields()}}),new a.n({name:"falseText",label:Object(r.a)("False Text"),separator:!0,required:!0}),new a.n({name:"trueText",label:Object(r.a)("True Text"),required:!0}),new a.c({name:"falseColor",filterEnabled:!0,label:Object(r.a)("False Color"),separator:!0,required:!0}),new a.c({name:"trueColor",filterEnabled:!0,label:Object(r.a)("True Color"),required:!0}),new a.a({name:"displayUnit",label:Object(r.a)("Display Unit"),separator:!0,onChange:function(t,e){return e._updateFields()}}),new a.n({name:"unit",label:Object(r.a)("Unit"),maxLength:16}),new a.o({name:"decimals",label:Object(r.a)("Decimals"),min:0,max:10}),new a.c({name:"color",filterEnabled:!0,label:Object(r.a)("Color"),required:!0}),new a.l({name:"size",label:Object(r.a)("Size"),required:!0,ticks:u.b(1,11).map((function(t){return{value:t,label:"".concat(t)}}))}),new a.a({name:"customText",label:Object(r.a)("Custom Text"),separator:!0,onChange:function(t,e){return e._updateFields()}}),new a.n({name:"text",label:Object(r.a)("Text"),description:Object(r.a)("Use {{value}} as a placeholder for current port value."),required:!0}),new a.a({name:"customValues",label:Object(r.a)("Custom Values"),separator:!0,onChange:function(t,e){return e._updateFields()}}),new a.o({name:"customValuesCount",label:Object(r.a)("Number Of Values"),min:2,max:50,onChange:function(t,e){return e._updateFields()}})]},o))}return w(n,[{key:"onUpdateFromWidget",value:function(){this._updateFields()}},{key:"_updateFields",value:function(){var t=this.getUnvalidatedData(),e=this.getPort(t.portId),n=!0;e&&"number"===e.type&&(n=!1);var o=this.getFields().filter((function(t){return t.getName().match(new RegExp("customValue\\d+"))})),r=this.getFields().filter((function(t){return t.getName().match(new RegExp("customText\\d+"))})),a=this.getFields().filter((function(t){return t.getName().match(new RegExp("customColor\\d+"))})),l=o.length-1;u.b(l+1,t.customValuesCount).forEach(function(t){var n=this._addCustomFields(t,e);o.push(n.valueField),r.push(n.textField),a.push(n.colorField)}.bind(this));var i,s=[].concat(b(o),b(r),b(a)).map((function(t){return t.getName()})),f=["falseText","trueText","falseColor","trueColor"],d=["displayUnit","unit","decimals","color","customText","text","customValues","customValuesCount"].concat(b(s)),m=[].concat(f,b(d));n?i=c.i(f.map((function(t){return[t,!0]}))):(i=c.i(d.map((function(t){return[t,!0]}))),(t.customText||t.customValues)&&delete i.displayUnit,(t.customText||t.customValues||!t.displayUnit)&&delete i.unit,t.customText&&!t.customValues||delete i.text,t.customValues?(delete i.color,delete i.customText):(delete i.customValuesCount,s.forEach((function(t){return delete i[t]}))),u.b(t.customValuesCount,l+1).forEach(function(t){var e=this._getCustomFields(t);delete i[e.valueField.getName()],delete i[e.textField.getName()],delete i[e.colorField.getName()]}.bind(this))),m.forEach(function(t){var e=this.getField(t);t in i&&e.isHidden()?e.show():t in i||e.isHidden()||e.hide()}.bind(this))}},{key:"_addCustomFields",value:function(t,e){var n=null,o=null,l=!1,i=null;e&&(n=e.min,o=e.max,l=e.integer,i=e.step);var u=this.getField("customValuesCount"),c=this.getFieldIndex(u)+1+3*t,s=new a.h({name:"customValue".concat(t),label:"".concat(Object(r.a)("Value")," ").concat(t+1),required:!0,separator:!0,min:n,max:o,integer:l,step:i});this.addField(c,s);var f=new a.n({name:"customText".concat(t),label:"".concat(Object(r.a)("Text")," ").concat(t+1),required:!0});this.addField(c+1,f);var d=new a.c({name:"customColor".concat(t),label:"".concat(Object(r.a)("Color")," ").concat(t+1),filterEnabled:!0,required:!0});return this.addField(c+2,d),{valueField:s,textField:f,colorField:d}}},{key:"_getCustomFields",value:function(t){return{valueField:this.getField("customValue".concat(t)),textField:this.getField("customText".concat(t)),colorField:this.getField("customColor".concat(t))}}},{key:"fromWidget",value:function(t){var e=C(P(n.prototype),"fromWidget",this).call(this,t);return e.customValues.forEach((function(t,n){e["customValue".concat(n)]=t.value,e["customText".concat(n)]=t.text,e["customColor".concat(n)]=t.color})),e.customValues=e.customValues.length>=2,e.customValuesCount=e.customValues.length,e}},{key:"toWidget",value:function(t,e){t.customValues?t.customValues=u.b(0,t.customValuesCount).map((function(e){return{value:t["customValue".concat(e)],text:t["customText".concat(e)],color:t["customColor".concat(e)]}})):t.customValues=[],C(P(n.prototype),"toWidget",this).call(this,t,e)}},{key:"fromPort",value:function(t,e){var o=C(P(n.prototype),"fromPort",this).call(this,t,e);return o.unit=t.unit,o}}]),n}(m.a),E=function(t){j(n,t);var e=V(n);function n(){var t;return g(this,n),(t=e.call(this))._portId="",t._falseText=Object(r.a)("Off"),t._falseColor="@disabled-color",t._trueText=Object(r.a)("On"),t._trueColor=d.a,t._displayUnit=!0,t._unit="",t._decimals=0,t._color=d.a,t._size=5,t._customText=!1,t._text="{{value}}",t._customValues=[],t._textElement=null,t}return w(n,[{key:"isValid",value:function(){if(!this._portId)return!1;var t=this.getPort(this._portId);return Boolean(t&&t.enabled&&!1!==t.online)}},{key:"showCurrentValue",value:function(){var t=this.getPortValue(this._portId);null!=t&&this._showValue(t)}},{key:"onPortValueChange",value:function(t,e){t===this._portId&&this._showValue(e)}},{key:"makeContent",value:function(t,e){var n=Object(o.a)("<div></div>",{class:"dashboard-text-indicator-container"});return this._textElement=this._makeTextElement(t,e),n.append(this._textElement),n}},{key:"_makeTextElement",value:function(t,e){var n=Object(o.a)("<span></span>",{class:"dashboard-text-indicator-text-element"});return n.css("font-size","".concat(10*this._size,"%")),n}},{key:"_showValue",value:function(t){var e,n;if(this._isBoolean())t?(e=this._trueText,n=this._trueColor):(e=this._falseText,n=this._falseColor);else{var o=t.toFixed(this._decimals);if(this._displayUnit&&(o+=this._unit),this._customValues.length){var r=this._customValues.find((function(e){return e.value===t}))||this._customValues[0];e=r.text,n=r.color}else this._customText?(e=this._text,n=this._color):(e="{{value}}",n=this._color);e=s.c(e,"{{value}}",o)}n=i.f(n),this._textElement.css("color",n),this._textElement.html(e)}},{key:"_isBoolean",value:function(){var t=this.getPort(this._portId);return t&&"boolean"===t.type}},{key:"configToJSON",value:function(){return{portId:this._portId,falseText:this._falseText,falseColor:this._falseColor,trueText:this._trueText,trueColor:this._trueColor,displayUnit:this._displayUnit,unit:this._unit,decimals:this._decimals,color:this._color,size:this._size,customText:this._customText,text:this._text,customValues:this._customValues}}},{key:"configFromJSON",value:function(t){t.portId&&(this._portId=t.portId),null!=t.falseText&&(this._falseText=t.falseText),null!=t.trueText&&(this._trueText=t.trueText),null!=t.falseColor&&(this._falseColor=t.falseColor),null!=t.trueColor&&(this._trueColor=t.trueColor),null!=t.displayUnit&&(this._displayUnit=t.displayUnit),null!=t.unit&&(this._unit=t.unit),null!=t.decimals&&(this._decimals=t.decimals),null!=t.color&&(this._color=t.color),null!=t.size&&(this._size=t.size),null!=t.customText&&(this._customText=t.customText),null!=t.text&&(this._text=t.text),null!=t.customValues&&(this._customValues=t.customValues)}}]),n}(d.b);x(E,"category",Object(r.a)("Displays")),x(E,"displayName",Object(r.a)("Text Indicator")),x(E,"typeName","TextIndicator"),x(E,"icon",new l.a({name:"widget-text",stockName:"qtoggle"})),x(E,"ConfigForm",k),x(E,"vResizable",!0),x(E,"hResizable",!0),h.m(E),e.default=E}}]);
//# sourceMappingURL=11.js.map