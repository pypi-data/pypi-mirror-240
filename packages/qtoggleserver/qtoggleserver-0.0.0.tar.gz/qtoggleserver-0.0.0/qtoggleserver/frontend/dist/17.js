(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{176:function(t,e,n){"use strict";n.r(e);var o=n(2),i=n(0),r=n(4),a=n(7),s=n(8),c=n(71),h=n(160),u=n(74),l=n(61);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(){return(v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function y(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),t}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=w(t);if(e){var i=w(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return k(this,n)}}function k(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var D=function(t){m(n,t);var e=O(n);function n(t){var o=v({},t);return b(this,n),e.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({fields:[new r.c({name:"color",label:Object(i.a)("Color"),filterEnabled:!0,required:!0}),new c.a({name:"portId",label:Object(i.a)("Port"),required:!0,onChange:function(t,e){return e._showHidePortTypeFields()}}),new r.a({name:"inverted",label:Object(i.a)("Inverted Logic")}),new r.h({name:"offValue",label:Object(i.a)("Off Value"),required:!0}),new r.h({name:"onValue",label:Object(i.a)("On Value"),required:!0})]},o))}return y(n,[{key:"_showHidePortTypeFields",value:function(){var t=this.getUnvalidatedData(),e=this.getPort(t.portId),n=!0;e&&"number"===e.type&&(n=!1);var o=["inverted"],i=["offValue","onValue"];n?(i.forEach((function(t){this.getField(t).hide()}),this),o.forEach((function(t){this.getField(t).show()}),this)):(o.forEach((function(t){this.getField(t).hide()}),this),i.forEach((function(t){this.getField(t).show()}),this))}},{key:"onUpdateFromWidget",value:function(){this._showHidePortTypeFields()}}]),n}(u.a),j=function(t){m(n,t);var e=O(n);function n(){var t;return b(this,n),(t=e.call(this))._on=!1,t._color=h.a,t._portId="",t._inverted=!1,t._offValue=0,t._onValue=1,t._containerDiv=null,t._backgroundDiv=null,t._handleDiv=null,t._thickness=0,t._vert=!1,t._dragPastThresh=!1,t._dragDelta=0,t}return y(n,[{key:"isValid",value:function(){if(!this._portId)return!1;var t=this.getPort(this._portId);return Boolean(t&&t.enabled&&t.writable&&!1!==t.online)}},{key:"showCurrentValue",value:function(){var t=this.getPortValue(this._portId);null!=t&&this._showValue(t)}},{key:"onPortValueChange",value:function(t,e){t===this._portId&&null!=e&&this._showValue(e)}},{key:"_showValue",value:function(t){this._isBoolean()?(t=this._inverted?!t:t)&&!this._on?this._showOn():!t&&this._on&&this._showOff():t!==this._onValue||this._on?t===this._offValue&&this._on&&this._showOff():this._showOn()}},{key:"makeContent",value:function(t,e){return t>e?(this._vert=!1,this._containerDiv=this._makeHorizContent(t,e),this._containerDiv.removeClass("vert")):(this._vert=!0,this._containerDiv=this._makeVertContent(t,e),this._containerDiv.addClass("vert")),this._on?this._showOn():this._showOff(),this._containerDiv}},{key:"_makeHorizContent",value:function(t,e){var n=(t-2*e)/2,i=0,r=2*e,a=e;t<2*e&&(n=0,i=(e-t/2)/2,r=t,a=t/2);var s=Object(o.a)("<div></div>",{class:"dashboard-on-off-button-container"});return s.css({top:"".concat(i,"em"),left:"".concat(n,"em"),width:"".concat(r,"em"),height:"".concat(a,"em"),borderWidth:"".concat(l.b,"em")}),this._thickness=a,this._backgroundDiv=this._makeBackground(this._thickness),s.append(this._backgroundDiv),s}},{key:"_makeVertContent",value:function(t,e){var n=0,i=(e-2*t)/2,r=t,a=2*t;e<2*t&&(n=(t-e/2)/2,i=0,a=e,r=e/2);var s=Object(o.a)("<div></div>",{class:"dashboard-on-off-button-container"});return s.css({top:"".concat(i,"em"),left:"".concat(n,"em"),width:"".concat(r,"em"),height:"".concat(a,"em"),borderWidth:"".concat(l.b,"em")}),this._thickness=r,this._backgroundDiv=this._makeBackground(this._thickness),s.append(this._backgroundDiv),s}},{key:"_makeBackground",value:function(t){var e=Object(o.a)("<div></div>",{class:"dashboard-on-off-button-background"});return e.css("border-radius","".concat(Math.min(this.getContentWidth(),this.getContentHeight()),"em")),this._handleDiv=this._makeHandle(t),e.append(this._handleDiv),this.setDragElement(e,this._vert?"y":"x"),e.on("pointerup",function(){this._dragDelta<.05*this._thickness&&this._doSwitch()}.bind(this)),e}},{key:"_makeHandle",value:function(t){var e=Object(o.a)("<div></div>",{class:"dashboard-on-off-button-handle"}),n=this.roundEm(l.a),i=t-2*(l.b+n);e.css({width:"".concat(i,"em"),height:"".concat(i,"em"),margin:"".concat(n,"em"),color:s.f(this._color)});var r=Object(o.a)("<div></div>",{class:"dashboard-on-off-button-text-on"});r.text("ON"),r.css("font-size","".concat(.3*t,"em"));var a=Object(o.a)("<div></div>",{class:"dashboard-on-off-button-text-off"});return a.text("OFF"),a.css("font-size","".concat(.3*t,"em")),e.append(r),e.append(a),e}},{key:"_showOn",value:function(){this._on=!0,this._containerDiv.addClass("on"),this._vert?this._handleDiv.css({top:"".concat(this._thickness,"em"),left:0}):this._handleDiv.css({left:"".concat(this._thickness,"em"),top:0}),this._handleDiv.css("background",s.f(this._color))}},{key:"_showOff",value:function(){this._on=!1,this._containerDiv.removeClass("on"),this._handleDiv.css({left:0,top:0}),this._handleDiv.css("background","")}},{key:"_doSwitch",value:function(){var t;(this._on?this._showOff():this._showOn(),this._portId)&&(t=this._isBoolean()?this._inverted?!this._on:this._on:this._on?this._onValue:this._offValue,this.setPortValue(this._portId,t))}},{key:"_isBoolean",value:function(){var t=this.getPort(this._portId);return t&&"boolean"===t.type}},{key:"onDragBegin",value:function(){this._handleDiv.css("transition","none"),this._dragDelta=0}},{key:"onDrag",value:function(t,e,n,o){var i=this._vert?o:n;i=this._on?Math.max(-this._thickness,Math.min(0,i))+this._thickness:Math.max(0,Math.min(this._thickness,i));var r=Math.abs(i)/this._thickness>.5;this._on&&(r=!r),this._dragPastThresh!==r&&this.vibrate(),this._dragPastThresh=r,this._dragDelta=Math.max(Math.abs(n),Math.abs(o)),this._vert?this._handleDiv.css({top:"".concat(i,"em"),left:0}):this._handleDiv.css({left:"".concat(i,"em"),top:0})}},{key:"onDragEnd",value:function(t,e,n,o){this._handleDiv.css("transition","");var i=this._vert?o:n;if(this._dragPastThresh){if(this._on&&i>0||!this._on&&i<0)return;this._doSwitch(),this._dragPastThresh=!1}else this._on?this._showOn():this._showOff()}},{key:"configToJSON",value:function(){return{color:this._color,portId:this._portId,inverted:this._inverted,offValue:this._offValue,onValue:this._onValue}}},{key:"configFromJSON",value:function(t){t.color&&(this._color=t.color),t.portId&&(this._portId=t.portId),null!=t.inverted&&(this._inverted=t.inverted),null!=t.offValue&&(this._offValue=t.offValue),null!=t.onValue&&(this._onValue=t.onValue)}}]),n}(h.b);_(j,"category",Object(i.a)("Sliders/Knobs")),_(j,"displayName",Object(i.a)("On/Off Button")),_(j,"typeName","OnOffButton"),_(j,"icon",new a.a({name:"widget-on-off-button",stockName:"qtoggle"})),_(j,"ConfigForm",D),_(j,"hResizable",!0),_(j,"vResizable",!0),l.m(j),e.default=j}}]);
//# sourceMappingURL=17.js.map