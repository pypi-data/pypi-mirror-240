{"version":3,"file":"jupyter_ui_packages_react_lib_jupyter_JupyterConfig_js.595a0d9ddfd14cf26026.js","mappings":"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","sources":["webpack://@datalayer/run/../../jupyter/ui/packages/react/src/jupyter/JupyterConfig.ts"],"sourcesContent":["import { PageConfig } from '@jupyterlab/coreutils';\nimport { JupyterProps } from './Jupyter';\n\n/**\n * Type of the Jupyter configuration.\n */\nexport type IJupyterConfig = {\n  jupyterServerHttpUrl: string;\n  jupyterServerWsUrl: string;\n  jupyterToken: string;\n  insideJupyterLab: boolean;\n  insideJupyterHub: boolean;\n}\n\n/**\n * The default Jupyter configuration.\n */\nlet config: IJupyterConfig = {\n  jupyterServerHttpUrl: '',\n  jupyterServerWsUrl: '',\n  jupyterToken: '',\n  insideJupyterLab: false,\n  insideJupyterHub: false,\n}\n\n/**\n * Setter for jupyterServerHttpUrl.\n */\nexport const setJupyterServerHttpUrl = (jupyterServerHttpUrl: string) => {\n  config.jupyterServerHttpUrl = jupyterServerHttpUrl;\n}\n/**\n * Getter for jupyterServerHttpUrl.\n */\n export const getJupyterServerHttpUrl = () => config.jupyterServerHttpUrl;\n\n/**\n * Setter for jupyterServerWsUrl.\n */\n export const setJupyterServerWsUrl = (jupyterServerWsUrl: string) => {\n  config.jupyterServerWsUrl = jupyterServerWsUrl;\n}\n/**\n * Getter for jupyterServerWsUrl.\n */\n export const getJupyterServerWsUrl = () => config.jupyterServerWsUrl;\n\n/**\n * Setter for jupyterToken.\n */\n export const setJupyterToken = (jupyterToken: string) => {\n  config.jupyterToken = jupyterToken;\n}\n/**\n * Getter for jupyterToken.\n */\n export const getJupyterToken = () => config.jupyterToken;\n\n/**\n * Method to load the Jupyter configuration from the\n * host HTML page.\n */\nexport const loadJupyterConfig = (props: Pick<JupyterProps, 'lite' | 'jupyterServerHttpUrl' | 'jupyterServerWsUrl' | 'collaborative' | 'terminals' | 'jupyterToken'>) => {\n  const { lite, jupyterServerHttpUrl, jupyterServerWsUrl, collaborative, terminals, jupyterToken } = props;\n  const datalayerConfigData = document.getElementById('datalayer-config-data');\n  if (datalayerConfigData) {\n    config = JSON.parse(datalayerConfigData.textContent || '') as IJupyterConfig;\n    setJupyterServerHttpUrl(jupyterServerHttpUrl ?? config.jupyterServerHttpUrl ?? location.protocol + '//' + location.host + \"/api/jupyter\");\n    setJupyterServerWsUrl(jupyterServerWsUrl ?? config.jupyterServerWsUrl ?? location.protocol.replace('http', 'ws') + '//' + location.host + \"/api/jupyter\");\n    setJupyterToken(jupyterToken ?? config.jupyterToken ?? '');\n  }\n  else {\n    // No Datalayer Config.\n    const jupyterConfigData = document.getElementById('jupyter-config-data');\n    if (jupyterConfigData) {\n      const jupyterConfig = JSON.parse(jupyterConfigData.textContent || '');\n      setJupyterServerHttpUrl(jupyterServerHttpUrl ?? location.protocol + '//' + location.host + jupyterConfig.baseUrl);\n      setJupyterServerWsUrl(jupyterServerWsUrl ?? location.protocol === \"https\" ? \"wss://\" + location.host : \"ws://\" + location.host + jupyterConfig.baseUrl);\n      setJupyterToken(jupyterToken ?? jupyterConfig.token);\n      config.insideJupyterLab = jupyterConfig.appName === 'JupyterLab';\n    }\n    else {\n      // No Datalayer and no JupyterLab Config.\n      setJupyterServerHttpUrl(jupyterServerHttpUrl ?? location.protocol + '//' + location.host + \"/api/jupyter\");\n      setJupyterServerWsUrl(jupyterServerWsUrl ?? location.protocol.replace('http', 'ws') + '//' + location.host + \"/api/jupyter\");\n      setJupyterToken(jupyterToken ?? '');\n      }\n  }\n  if (lite) {\n    setJupyterServerHttpUrl(location.protocol + '//' + location.host);\n    setJupyterServerWsUrl(location.protocol === \"https\" ? \"wss://\" + location.host : \"ws://\" + location.host);\n  }\n  PageConfig.setOption('baseUrl', getJupyterServerHttpUrl());\n  PageConfig.setOption('wsUrl', getJupyterServerWsUrl());\n  PageConfig.setOption('token', getJupyterToken());\n  PageConfig.setOption('collaborative', String(collaborative));\n  PageConfig.setOption('disableRTC', String(!collaborative));\n  PageConfig.setOption('terminalsAvailable', String(terminals));\n  PageConfig.setOption('mathjaxUrl', 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js');\n  PageConfig.setOption('mathjaxConfig', 'TeX-AMS_CHTML-full,Safe');\n//  PageConfig.getOption('hubHost')\n//  PageConfig.getOption('hubPrefix')\n//  PageConfig.getOption('hubUser')\n//  PageConfig.getOption('hubServerName')\n  config.insideJupyterHub = PageConfig.getOption('hubHost') !== \"\";\n  return config;\n}\n"],"names":[],"sourceRoot":""}