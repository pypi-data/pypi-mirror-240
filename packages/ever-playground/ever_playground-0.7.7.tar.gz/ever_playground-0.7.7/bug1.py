from ever_playground import *

# xxx = [0xb5, 0xee, 0x9c, 0x72]
# xxx += [1, 1, 1, 1, 0, 6, 0, 0, 8, 241, 1, 4, 133, 110, 133, 234, 133, 133, 133, 133, 0, 1, 1, 1]

# code = Cell.read(xxx)
# r = runvm(Slice(code), [], capabilities = 0x0000_0020_0000, trace = False)

bb = [0xb5, 0xee, 0x9c, 0x72]
# bb += [
#  0x01, 0x01, 0x01, 0x01, 0x00, 0x06, 0x00, 0x00, 0x08, 0x68, 0xeb, 0xf8, 0x00, 0x00, 0x00, 0x00,
#  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
#  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
#  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
#  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x68, 0xeb, 0xf8, 0x15, 0x15,
#  0x36, 0x15, 0x15, 0x15, 0x15, 0x15, 0x11,
# ]

#bb += [1, 1, 1, 1, 0, 38, 0, 0, 71, 235, 235, 235, 235, 235, 235, 235, 235, 235, 240, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 122, 235, 235, 235, 235, 235, 235, 235, 166, 47, 166, 166, 76, 166, 166, 166, 166, 166, 166, 49, 235, 235, 235, 235, 235, 235, 235, 235, 65, 255, 255, 255, 244, 244, 58, 58, 58, 58, 58, 58, 58, 58, 58, 58, 58, 58, 58, 244, 244, 0, 0, 0, 0, 0, 0, 0, 8, 0, 244, 244, 244, 244, 244, 244, 255, 0]
#bb += [1, 1, 10, 1, 0, 72, 5, 0, 0, 0, 0, 0, 0, 0, 32, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 72, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 240, 235, 235, 235, 21, 235, 235, 235, 235, 235, 233, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 101, 101, 101, 0, 1]
#bb += [1, 1, 10, 1, 0, 72, 0, 0, 32, 0, 0, 255, 128, 241, 0, 114, 0, 0, 0, 128, 0, 0, 0, 0, 153, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 72, 0, 255, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 112, 0, 0, 0, 1]
#bb += [1, 1, 10, 1, 0, 72, 5, 0, 0, 0, 0, 0, 0, 0, 32, 0, 0, 0, 255, 3, 0, 0, 0, 0, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 72, 235, 235, 235, 235, 235, 151, 235, 59, 0, 235, 235, 0, 233, 241, 102, 7, 0, 128, 2, 32, 0, 0, 0, 1, 137, 1, 165, 255, 44, 255, 255, 18, 97, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 9, 154, 0, 0]
bb += [1, 1, 1, 1, 0, 10, 0, 0, 16, 104, 118, 104, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 1, 1, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 227, 227, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 235, 104, 229, 254, 56, 0, 0, 139, 91]

code = Cell.read(bb)
print(code)

# 00 00 ff80 f100 72 00 00 00 8000 00 00 00 99
# NOP
# NOP
# SETCP 0x80
# CALL 0
# PUSHINT 2
# NOP
# NOP
# NOP
# PUSHINT 0
# NOP
# NOP
# NOP
# 


# code = assemble("""
#   ;DEPTH
#   AGAINEND
#   ACCEPT
# """)
# print(code)

cc = Continuation(
    ContinuationType.create_ordinary(),
    Slice(code),
    [],
    SaveList(),
    -1
)

regs = SaveList()
capabilities = 0x0000_0020_0000
trace = False
gas_limit = 1_000_000
gas_limit_max = 1_000_000
gas_credit = 0

state = VmState(cc, regs, Gas(gas_limit, gas_credit, gas_limit_max, 10))
r = runvm_generic(state, capabilities, trace)
