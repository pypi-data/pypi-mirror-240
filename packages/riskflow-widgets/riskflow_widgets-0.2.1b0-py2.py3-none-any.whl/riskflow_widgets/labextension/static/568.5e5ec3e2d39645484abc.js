(self.webpackChunkriskflow_widgets=self.webpackChunkriskflow_widgets||[]).push([[568,26],{568:(e,t,i)=>{e.exports=i(316),e.exports.version=i(147).version},316:(e,t,i)=>{"use strict";i.r(t),i.d(t,{FLOT_WIDGET_VERSION:()=>p,FlotModel:()=>u,FlotView:()=>g,TABLE_WIDGET_VERSION:()=>d,TREE_WIDGET_VERSION:()=>n,TableModel:()=>h,TableView:()=>o,TreeModel:()=>r,TreeView:()=>s});var a=i(395);i(592),i(52);class s extends a.DOMWidgetView{initialize(e){super.initialize(e),this.loaded=!1}generateActionMethod(e,t,i,a){return function(s){t=e.create_node(t,{type:i,data:a}),e.edit(t,a+".")}}generateContextMethod(e,t,i){var a={};for(var s in i)i.hasOwnProperty(s)&&(a[s]={separator_before:!1,separator_after:!1,label:s,action:this.generateActionMethod(e,t,i[s],s)});return a}perform_update(e,t,i){var a=$.parseJSON(this.model.get("settings")),s=this.model.get("plugins"),n=this;this.multiselect=s.includes("checkbox"),e.jstree({core:{data:t,check_callback:!0},types:i,plugins:s,themes:{icons:!0},contextmenu:s.includes("contextmenu")?{items:function(t){var i=e.jstree(!0),s={};for(const e in a.contextmenu)a.contextmenu.hasOwnProperty(e)&&(s[e]={separator_before:!1,separator_after:!1,label:e,action:!1,submenu:n.generateContextMethod(i,t,a.contextmenu[e])});var r,l={Toggle:{separator_before:!0,label:"Toggle Status",action:function(){i.get_selected(!0).map((function(e){e.data.ignore=!!e.data.hasOwnProperty("ignore")&&e.data.ignore,e.data.ignore=!e.data.ignore;var t=i.get_node(e,!0).children(".jstree-anchor");e.data.ignore?t.addClass("jstree-disabled").attr("aria-disabled",!0):t.removeClass("jstree-disabled").attr("aria-disabled",!1)})),i.trigger("enable_node",{node:t})}}},o={Delete:{separator_before:!0,label:"Delete Node",action:function(e){i.delete_node(t)}}};switch(t.type){case"root":r=s;break;case"group":r=a.events.includes("ignore")?$.extend({},s,l,o):$.extend({},s,o);break;default:r=a.events.includes("ignore")?$.extend({},l,o):o}return r}}:null}).on("select_node.jstree",this.handle_select.bind(this)),a.events.includes("create")&&e.on("rename_node.jstree",this.handle_tree_change.bind(this)),a.events.includes("delete")&&e.on("delete.jstree",this.handle_delete.bind(this)),a.events.includes("ignore")&&(e.on("enable_node.jstree",this.handle_toggle.bind(this)),e.on("open_node.jstree",this.handle_open.bind(this))),this.multiselect&&e.on("deselect_node.jstree",this.handle_deselect.bind(this))}update(){if(!this.loaded&&this.model.get("value")){var e=this.$tree,t=$.parseJSON(this.model.get("value")),i=$.parseJSON(this.model.get("type_data"));this.perform_update(e,t,i),this.$search.on("keyup",this.handle_search.bind(this)).on("paste",this.handle_search.bind(this)),this.loaded=!0}return super.update()}render(){this.$search=$('<input type="text" />').addClass("input").addClass("widget-text").appendTo(this.el),this.$tree=$("<div />").appendTo(this.el),this.to=!1,this.displayed.then(_.bind(this.update,this))}get_json_path(e){return this.$tree.jstree("get_path",e.node).slice(1)}handle_search(e,t){var i=this;this.to&&clearTimeout(this.to),this.to=setTimeout((function(){var e=i.$search.val();i.$tree.jstree(!0).search(e)}),250)}handle_select(e,t){if(null!=t){if(this.model.set("selected",this.get_json_path(t)),this.multiselect){var i=this.$tree.jstree("get_selected",!0).map((function(e){return e.text}));this.model.set("checked",i)}this.touch()}}handle_open(e,t){if(null!=t){var i=this;t.node.children.forEach((function(e){var t=i.$tree.jstree("get_node",e),a=$(i.$tree.jstree("get_node",e,!0)).children(".jstree-anchor");t.data.hasOwnProperty("ignore")&&t.data.ignore&&a.addClass("jstree-disabled").attr("aria-disabled",!0)}))}}handle_deselect(e,t){if(null!=t){var i=this.$tree.jstree("get_selected",!0).map((function(e){return e.text}));this.model.set("checked",i),this.touch()}}handle_toggle(e,t){if(null!=t){var i=this,a=this.$tree.jstree("get_selected",!0).map((function(e){var t=i.$tree.jstree("get_path",e);return t[0]=!!e.data.hasOwnProperty("ignore")&&e.data.ignore,t}));this.model.set("ignore",a),this.touch()}}handle_tree_change(e,t){null!=t&&(0!=t.node.text.indexOf(t.node.data)&&this.$tree.jstree("rename_node",t.node,t.node.data+"."+t.node.text),this.model.set("created",this.get_json_path(t)),this.touch())}handle_delete(e,t){null!=t&&(this.model.set("deleted",this.get_json_path(t)),this.touch())}}const n="0.1.1";class r extends a.DOMWidgetModel{defaults(){return{...super.defaults(),_model_name:"TreeModel",_view_name:"TreeView",_model_module:"riskflow_widgets",_view_module:"riskflow_widgets",_model_module_version:n,_view_module_version:n,value:"",type_data:"",selected:[],created:[],deleted:[],plugins:[],checked:[],ignore:[],settings:""}}}var l=i(395);class o extends l.DOMWidgetView{initialize(e){super.initialize(e),this.loaded=!1}update(){var e=this.model.get("value"),t=""===e?null:$.parseJSON(e);if(this.loaded)this.hot.loadData(t);else{var i=this;this.hot=new Handsontable(i.$table[0],_.extend({data:t,afterSelection:function(){IPython.keyboard_manager.disable()},afterDeselect:function(){IPython.keyboard_manager.enable()},afterChange:function(e,t){"loadData"!==t&&i.handle_table_change(e,this.getData())}},this.settings)),this.loaded=!0}return super.update()}render(){var e=this.model.get("description");""!=e&&(this.el.classList.add("widget-inline-hbox"),this.$label=$("<div />").addClass("widget-label").appendTo(this.el),this.$label.text(e)),this.$table=$("<div/>").appendTo(this.el),this.settings=$.parseJSON(this.model.get("settings")),this.colHeaders="colHeaders"in this.settings?this.settings.colHeaders:[],this.label=e,this.displayed.then(_.bind(this.update,this))}handle_table_change(e,t){this.colHeaders.length&&t.length>1?t[0].length!=this.colHeaders.length&&"Model Configuration"!=this.model.get("description")||(this.model.set("value",JSON.stringify(t)),this.touch()):t.length>1&&(nulls_col=t[0].slice(1,-1).map((e=>null!=e)),nulls_row=!0,t.slice(1,-1).forEach(((e,t)=>{nulls_row=null!=e[0]&nulls_row&e.slice(1).some((e=>e)),e.slice(1).forEach(((e,t)=>{nulls_col[t]=nulls_col[t]&null==e}))})),!nulls_col.some((e=>e))&&nulls_row&&(this.model.set("value",JSON.stringify(t.slice(0,-1).map((e=>e.slice(0,-1).map((e=>parseFloat(e))))))),this.touch()))}}const d="0.1.1";class h extends l.DOMWidgetModel{defaults(){return{...super.defaults(),_model_name:"TableModel",_view_name:"TableView",_model_module:"riskflow_widgets",_view_module:"riskflow_widgets",_model_module_version:d,_view_module_version:d,value:"",settings:"",description:""}}}var c=i(395);i(191),i(78),i(25);class g extends c.DOMWidgetView{update(){var e=this.model.get("value");if(""!=e){var t=$.parseJSON(e);this.renderGraph(t)}else console.log("update is null - why?");return super.update()}render(){this.el.classList.add("widget-inline-hbox"),""!=this.model.get("description")&&(this.$label=$("<div />").addClass("widget-label").appendTo(this.el),this.$label.text(this.model.get("description"))),this.$flot=$("<div/>").addClass("flotplot").appendTo(this.el),this.$table=$("<div/>").addClass("handsonplot").appendTo(this.el),this.colheaders=[],this.displayed.then(_.bind(this.update,this))}renderGraph(e){var t=this,i=$.parseJSON(this.model.get("flot_settings")),a=$.parseJSON(this.model.get("hot_settings")),s=function(e,t){var i,a,s,n,r=[["Index"].concat(e.map((e=>e.label)))];if(e.length>1)for(var l=0;l<e[0].data.length;l++){var o=e[0].data[l].slice(0);t&&(o[0]=(void 0,void 0,void 0,a=(i=new Date(o[0])).getFullYear().toString(),s=(i.getMonth()+1).toString(),n=i.getDate().toString(),a+"-"+(s[1]?s:"0"+s[0])+"-"+(n[1]?n:"0"+n[0])));for(var d=1;d<e.length;d++)o.push(e[d].data[l][1]);r.push(o)}else r=r.concat(e[0].data);return r}(e,"time"==_.get(i,"xaxis.mode"));a=_.extend({manualColumnMove:!0,contextMenu:!1,minSpareRows:1,width:300,height:300},a),this.colheaders=s[0],a.colHeaders=this.colheaders,i=_.extend({legend:{show:!0,position:"ne"},series:{lines:{show:!0},points:{show:!0},shadowSize:0},grid:{hoverable:!0},zoom:{interactive:!0},pan:{interactive:!0}},i),"time"==_.get(i,"xaxis.mode")&&(i=_.extend({yaxis:{tickFormatter:function(e){return e.toString().replace(/\B(?=(?:\d{3})+(?!\d))/g,",")}}},i)),$.plot(t.$flot,e,i),this.hot=new Handsontable(t.$table[0],_.extend({data:s.slice(1),afterSelection:function(){IPython.keyboard_manager.disable()},afterDeselect:function(){IPython.keyboard_manager.enable()},afterChange:function(e,i){"loadData"!==i&&t.handle_table_change(this.getData())}},a))}handle_table_change(e){var t=function(e,t){console.log("get");var i=[];if(t.countCols()>2)for(var a=t.getDataAtCol(0).slice(0,-1),s=e.slice(1),n=0;n<s.length;n++)i.push({label:s[n],data:_.zip(a,t.getDataAtCol(n+1).slice(0,-1))});else i=[{label:"Rate",data:t.getData().slice(0,-1)}];return i}(this.colheaders,this.hot);this.model.set("value",JSON.stringify(t)),this.touch()}}const p="0.1.1";class u extends c.DOMWidgetModel{defaults(){return{...super.defaults(),_model_name:"FlotModel",_view_name:"FlotView",_model_module:"riskflow_widgets",_view_module:"riskflow_widgets",_model_module_version:p,_view_module_version:p,value:"",hot_settings:"",flot_settings:"",description:""}}}i(790),i(624),i(52)},434:(e,t,i)=>{var a=i(645),s=i(667),n=i(351);t=a(!1);var r=s(n);t.push([e.id,".vakata-context {\r\n z-index:2999 !important;\r\n}\r\n.legendLayer .background {\r\n    fill: rgba(255, 255, 255, 0.85);\r\n    stroke: rgba(0, 0, 0, 0.85);\r\n    stroke-width: 1;\r\n}\r\n.legend {\r\n\t\tdisplay: block;\r\n\t\t-webkit-padding-start: 2px;\r\n\t\t-webkit-padding-end: 2px;\r\n\t\tborder-width: initial;\r\n\t\tborder-style: none;\r\n\t\tborder-color: initial;\r\n\t\tborder-image: initial;\r\n\t\tpadding-left: 10px;\r\n        padding-right: 10px;\r\n        padding-top: 10px;\r\n        padding-bottom: 10px;\r\n}\r\n.widget-box { overflow: visible }\r\n.widget-text { width: 500px !important; }\r\n.widget-label { align-self: baseline; min-width:35ex }\r\n.widget-inline-hbox { align-items: flex-end; }\r\n.widget-textarea  { width: auto; }\r\n.widget-tenor-text{width:140px;margin:0 !important}\r\n.widget-datepicker { width: 380px !important; }\r\n.widget-select { width: 450px !important; }\r\n.widget-tenorlistbox {width:140px; margin-bottom:0}\r\n.flotwrapper { position: relative; width: 800px; margin: auto; margin-top: 20px; font-size: 12pt; }\r\n.flottitle { color: #888; margin-left: 50px; }\r\n.flotgraph { position: relative; margin-top: 20px; }\r\n.flotplot { width: 400px; height: 300px; }\r\n.handsonplot { overflow: auto; height: 300px; max-width: 300px}\r\n.handsontable col.rowHeader {  width: 250px; }\r\n.container { width:95%; }\r\n.generictree { max-width : 450px; overflow: auto; max-height: 700px; padding : 5px; border-style:outset }\r\n.genericframe { padding : 5px; border-style:outset }\r\n.rightframe{ overflow: auto; max-height: 700px }\r\n.mainframe{ background-image:url("+r+"); background-repeat:repeat }\r\n",""]),e.exports=t},351:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});const a=i.p+"7ca36402b36b300be16d038ddca567600669e4786eef5a3e15785c910d3d255d.png"},52:(e,t,i)=>{var a=i(379),s=i(434);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.id,s,""]]);a(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},147:e=>{"use strict";e.exports={version:"0.2.1"}}}]);