export const id=56418;export const ids=[56418,4631];export const modules={76680:(e,t,i)=>{function a(e){return void 0===e||Array.isArray(e)?e:[e]}i.d(t,{r:()=>a})},55070:(e,t,i)=>{i.d(t,{Eu:()=>n,hZ:()=>r});const a=["#44739e","#984ea3","#00d2d5","#ff7f00","#af8d00","#7f80cd","#b3e900","#c42e60","#a65628","#f781bf","#8dd3c7","#bebada","#fb8072","#80b1d3","#fdb462","#fccde5","#bc80bd","#ffed6f","#c4eaff","#cf8c00","#1b9e77","#d95f02","#e7298a","#e6ab02","#a6761d","#0097ff","#00d067","#f43600","#4ba93b","#5779bb","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function n(e){return a[e%a.length]}function r(e,t){return t.getPropertyValue(`--graph-color-${e+1}`)||n(e)}},72043:(e,t,i)=>{i.d(t,{A:()=>o,v:()=>d});var a=i(23158),n=i(25101),r=i(66477);const s=(e,t,i,r)=>{const s=i((0,a.Z)(e,t),r);return s instanceof Date?(0,n.Z)(s,t):s},o=(e,t,i,a,n)=>i.time_zone===r.c_.server?s(e,a.time_zone,t,n):t(e,n),d=(e,t,i,a,n)=>i.time_zone===r.c_.server?s(e,a.time_zone,t,n):t(e,n)},43986:(e,t,i)=>{i.d(t,{L:()=>r,a:()=>n});var a=i(87367);const n={ms:1,s:1e3,min:6e4,h:36e5,d:864e5},r=(e,t)=>(0,a.Z)(parseFloat(e)*n[t])||"0"},26410:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{Bt:()=>l,T8:()=>c});var n=i(22075),r=i(66477),s=i(4631),o=e([s]);s=(o.then?(await o)():o)[0];const d=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],l=e=>e.first_weekday===r.FS.language?"weekInfo"in Intl.Locale.prototype?new Intl.Locale(e.language).weekInfo.firstDay%7:(0,n.L)(e.language)%7:d.includes(e.first_weekday)?d.indexOf(e.first_weekday):1,c=e=>{const t=l(e);return d[t]};a()}catch(e){a(e)}}))},12198:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{D_:()=>$,NC:()=>f,Nh:()=>k,U8:()=>z,WB:()=>_,mn:()=>h,p6:()=>c,pU:()=>d,ud:()=>y,yQ:()=>w});var n=i(14516),r=i(66477),s=i(4631),o=e([s]);s=(o.then?(await o)():o)[0];const d=(e,t,i)=>l(t,i.time_zone).format(e),l=(0,n.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{weekday:"long",month:"long",day:"numeric",timeZone:"server"===e.time_zone?t:void 0}))),c=(e,t,i)=>u(t,i.time_zone).format(e),u=(0,n.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",timeZone:"server"===e.time_zone?t:void 0}))),h=(e,t,i)=>m(t,i.time_zone).format(e),m=(0,n.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"short",day:"numeric",timeZone:"server"===e.time_zone?t:void 0}))),_=(e,t,i)=>{var a,n,s,o;const d=g(t,i.time_zone);if(t.date_format===r.t6.language||t.date_format===r.t6.system)return d.format(e);const l=d.formatToParts(e),c=null===(a=l.find((e=>"literal"===e.type)))||void 0===a?void 0:a.value,u=null===(n=l.find((e=>"day"===e.type)))||void 0===n?void 0:n.value,h=null===(s=l.find((e=>"month"===e.type)))||void 0===s?void 0:s.value,m=null===(o=l.find((e=>"year"===e.type)))||void 0===o?void 0:o.value,_=l.at(l.length-1);let y="literal"===(null==_?void 0:_.type)?null==_?void 0:_.value:"";"bg"===t.language&&t.date_format===r.t6.YMD&&(y="");return{[r.t6.DMY]:`${u}${c}${h}${c}${m}${y}`,[r.t6.MDY]:`${h}${c}${u}${c}${m}${y}`,[r.t6.YMD]:`${m}${c}${h}${c}${u}${y}`}[t.date_format]},g=(0,n.Z)(((e,t)=>{const i=e.date_format===r.t6.system?void 0:e.language;return e.date_format===r.t6.language||(e.date_format,r.t6.system),new Intl.DateTimeFormat(i,{year:"numeric",month:"numeric",day:"numeric",timeZone:"server"===e.time_zone?t:void 0})})),y=(e,t,i)=>v(t,i.time_zone).format(e),v=(0,n.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{day:"numeric",month:"short",timeZone:"server"===e.time_zone?t:void 0}))),f=(e,t,i)=>p(t,i.time_zone).format(e),p=(0,n.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{month:"long",year:"numeric",timeZone:"server"===e.time_zone?t:void 0}))),k=(e,t,i)=>b(t,i.time_zone).format(e),b=(0,n.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{month:"long",timeZone:"server"===e.time_zone?t:void 0}))),w=(e,t,i)=>D(t,i.time_zone).format(e),D=(0,n.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",timeZone:"server"===e.time_zone?t:void 0}))),$=(e,t,i)=>x(t,i.time_zone).format(e),x=(0,n.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{weekday:"long",timeZone:"server"===e.time_zone?t:void 0}))),z=(e,t,i)=>Z(t,i.time_zone).format(e),Z=(0,n.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{weekday:"short",timeZone:"server"===e.time_zone?t:void 0})));a()}catch(e){a(e)}}))},44583:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{DG:()=>h,E8:()=>y,NR:()=>f,o0:()=>c,yD:()=>_});var n=i(14516),r=i(4631),s=i(12198),o=i(49684),d=i(65810),l=e([r,s,o]);[r,s,o]=l.then?(await l)():l;const c=(e,t,i)=>u(t,i.time_zone).format(e),u=(0,n.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",hour:(0,d.y)(e)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,d.y)(e)?"h12":"h23",timeZone:"server"===e.time_zone?t:void 0}))),h=(e,t,i)=>m(t,i.time_zone).format(e),m=(0,n.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"short",day:"numeric",hour:(0,d.y)(e)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,d.y)(e)?"h12":"h23",timeZone:"server"===e.time_zone?t:void 0}))),_=(e,t,i)=>g(t,i.time_zone).format(e),g=(0,n.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{month:"short",day:"numeric",hour:(0,d.y)(e)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,d.y)(e)?"h12":"h23",timeZone:"server"===e.time_zone?t:void 0}))),y=(e,t,i)=>v(t,i.time_zone).format(e),v=(0,n.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",hour:(0,d.y)(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,d.y)(e)?"h12":"h23",timeZone:"server"===e.time_zone?t:void 0}))),f=(e,t,i)=>`${(0,s.WB)(e,t,i)}, ${(0,o.mr)(e,t,i)}`;a()}catch(e){a(e)}}))},49684:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{Vu:()=>c,Zs:()=>_,mr:()=>d,xO:()=>h});var n=i(14516),r=i(4631),s=i(65810),o=e([r]);r=(o.then?(await o)():o)[0];const d=(e,t,i)=>l(t,i.time_zone).format(e),l=(0,n.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{hour:"numeric",minute:"2-digit",hourCycle:(0,s.y)(e)?"h12":"h23",timeZone:"server"===e.time_zone?t:void 0}))),c=(e,t,i)=>u(t,i.time_zone).format(e),u=(0,n.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{hour:(0,s.y)(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,s.y)(e)?"h12":"h23",timeZone:"server"===e.time_zone?t:void 0}))),h=(e,t,i)=>m(t,i.time_zone).format(e),m=(0,n.Z)(((e,t)=>new Intl.DateTimeFormat(e.language,{weekday:"long",hour:(0,s.y)(e)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,s.y)(e)?"h12":"h23",timeZone:"server"===e.time_zone?t:void 0}))),_=(e,t,i)=>g(t,i.time_zone).format(e),g=(0,n.Z)(((e,t)=>new Intl.DateTimeFormat("en-GB",{hour:"numeric",minute:"2-digit",hour12:!1,timeZone:"server"===e.time_zone?t:void 0})));a()}catch(e){a(e)}}))},87367:(e,t,i)=>{i.d(t,{Z:()=>n});const a=(e,t=2)=>{let i=""+e;for(let e=1;e<t;e++)i=parseInt(i)<10**e?`0${i}`:i;return i};function n(e){const t=Math.floor(e/1e3/3600),i=Math.floor(e/1e3%3600/60),n=Math.floor(e/1e3%3600%60),r=Math.floor(e%1e3);return t>0?`${t}:${a(i)}:${a(n)}`:i>0?`${i}:${a(n)}`:n>0||r>0?`${n}${r>0?`.${a(r,3)}`:""}`:null}},65810:(e,t,i)=>{i.d(t,{y:()=>r});var a=i(14516),n=i(66477);const r=(0,a.Z)((e=>{if(e.time_format===n.zt.language||e.time_format===n.zt.system){const t=e.time_format===n.zt.language?e.language:void 0;return new Date("January 1, 2023 22:00:00").toLocaleString(t).includes("10")}return e.time_format===n.zt.am_pm}))},85157:(e,t,i)=>{i.d(t,{t:()=>r});class a{constructor(e=window.localStorage){this.storage=void 0,this._storage={},this._listeners={},this.storage=e,e===window.localStorage&&window.addEventListener("storage",(e=>{e.key&&this.hasKey(e.key)&&(this._storage[e.key]=e.newValue?JSON.parse(e.newValue):e.newValue,this._listeners[e.key]&&this._listeners[e.key].forEach((t=>t(e.oldValue?JSON.parse(e.oldValue):e.oldValue,this._storage[e.key]))))}))}addFromStorage(e){if(!this._storage[e]){const t=this.storage.getItem(e);t&&(this._storage[e]=JSON.parse(t))}}subscribeChanges(e,t){return this._listeners[e]?this._listeners[e].push(t):this._listeners[e]=[t],()=>{this.unsubscribeChanges(e,t)}}unsubscribeChanges(e,t){if(!(e in this._listeners))return;const i=this._listeners[e].indexOf(t);-1!==i&&this._listeners[e].splice(i,1)}hasKey(e){return e in this._storage}getValue(e){return this._storage[e]}setValue(e,t){const i=this._storage[e];this._storage[e]=t;try{void 0===t?this.storage.removeItem(e):this.storage.setItem(e,JSON.stringify(t))}catch(e){}finally{this._listeners[e]&&this._listeners[e].forEach((e=>e(i,t)))}}}const n={},r=e=>t=>{const i=e.storage||"localStorage";let r;i&&i in n?r=n[i]:(r=new a(window[i]),n[i]=r);const s=String(t.key),o=e.key||String(t.key),d=t.initializer?t.initializer():void 0;r.addFromStorage(o);const l=!1!==e.subscribe?e=>r.subscribeChanges(o,((i,a)=>{e.requestUpdate(t.key,i)})):void 0,c=()=>r.hasKey(o)?r.getValue(o):d;return{kind:"method",placement:"prototype",key:t.key,descriptor:{set(i){((i,a)=>{let n;e.state&&(n=c()),r.setValue(o,a),e.state&&i.requestUpdate(t.key,n)})(this,i)},get:()=>c(),enumerable:!0,configurable:!0},finisher(i){if(e.state&&e.subscribe){const e=i.prototype.connectedCallback,t=i.prototype.disconnectedCallback;i.prototype.connectedCallback=function(){e.call(this),this[`__unbsubLocalStorage${s}`]=null==l?void 0:l(this)},i.prototype.disconnectedCallback=function(){var e;t.call(this),null===(e=this[`__unbsubLocalStorage${s}`])||void 0===e||e.call(this),this[`__unbsubLocalStorage${s}`]=void 0}}e.state&&i.createProperty(t.key,{noAccessor:!0,...e.stateOptions})}}}},29171:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{c:()=>f,computeStateDisplay:()=>v,v:()=>y});var n=i(56007),r=i(66477),s=i(24833),o=i(43986),d=i(12198),l=i(44583),c=i(49684),u=i(18457),h=i(68307),m=i(58831),_=i(40095),g=e([d,l,c]);[d,l,c]=g.then?(await g)():g;const y=(e,t,i,a,n,r)=>f(e,i,a,n,t.entity_id,t.attributes,void 0!==r?r:t.state),v=(e,t,i,a,n,r)=>{const s=null==n?void 0:n[t.entity_id];return f(e,i,a,s,t.entity_id,t.attributes,void 0!==r?r:t.state)},f=(e,t,i,a,g,y,v)=>{if(v===n.lz||v===n.nZ)return e(`state.default.${v}`);if((0,u.sJ)(y)){if("duration"===y.device_class&&y.unit_of_measurement&&o.a[y.unit_of_measurement])try{return(0,o.L)(v,y.unit_of_measurement)}catch(e){}if("monetary"===y.device_class)try{return(0,u.uf)(v,t,{style:"currency",currency:y.unit_of_measurement,minimumFractionDigits:2,...(0,u.l4)({state:v,attributes:y},a)})}catch(e){}const e=y.unit_of_measurement?"%"===y.unit_of_measurement?(0,h.K)(t)+"%":` ${y.unit_of_measurement}`:"";return`${(0,u.uf)(v,t,(0,u.l4)({state:v,attributes:y},a))}${e}`}const f=(0,m.M)(g);if("datetime"===f){const e=new Date(v);return(0,l.o0)(e,t,i)}if(["date","input_datetime","time"].includes(f))try{const e=v.split(" ");if(2===e.length)return(0,l.o0)(new Date(e.join("T")),{...t,time_zone:r.c_.local},i);if(1===e.length){if(v.includes("-"))return(0,d.p6)(new Date(`${v}T00:00`),{...t,time_zone:r.c_.local},i);if(v.includes(":")){const e=new Date;return(0,c.mr)(new Date(`${e.toISOString().split("T")[0]}T${v}`),{...t,time_zone:r.c_.local},i)}}return v}catch(e){return v}if("counter"===f||"number"===f||"input_number"===f)return(0,u.uf)(v,t,(0,u.l4)({state:v,attributes:y},a));if(["button","event","image","input_button","scene","stt","tts","wake_word"].includes(f)||"sensor"===f&&"timestamp"===y.device_class)try{return(0,l.o0)(new Date(v),t,i)}catch(e){return v}var p;return"update"===f?"on"===v?(0,s.X4)(y)?(0,_.f)(y,s.k6)&&"number"==typeof y.in_progress?e("ui.card.update.installing_with_progress",{progress:y.in_progress}):e("ui.card.update.installing"):y.latest_version:y.skipped_version===y.latest_version?null!==(p=y.latest_version)&&void 0!==p?p:e("state.default.unavailable"):e("ui.card.update.up_to_date"):(null==a?void 0:a.translation_key)&&e(`component.${a.platform}.entity.${f}.${a.translation_key}.state.${v}`)||y.device_class&&e(`component.${f}.entity_component.${y.device_class}.state.${v}`)||e(`component.${f}.entity_component._.state.${v}`)||v};a()}catch(e){a(e)}}))},50239:(e,t,i)=>{i.d(t,{Y:()=>n,u:()=>a});const a=(e,t,i)=>Math.min(Math.max(e,t),i),n=(e,t,i)=>{let a;return a=null!=t?Math.max(e,t):e,a=null!=i?Math.min(a,i):a,a}},18457:(e,t,i)=>{i.d(t,{Hd:()=>o,SL:()=>r,l4:()=>l,sJ:()=>s,uf:()=>d});var a=i(66477),n=i(27593);const r=e=>s(e.attributes),s=e=>!!e.unit_of_measurement||!!e.state_class,o=e=>{switch(e.number_format){case a.y4.comma_decimal:return["en-US","en"];case a.y4.decimal_comma:return["de","es","it"];case a.y4.space_comma:return["fr","sv","cs"];case a.y4.system:return;default:return e.language}},d=(e,t,i)=>{const r=t?o(t):void 0;if(Number.isNaN=Number.isNaN||function e(t){return"number"==typeof t&&e(t)},(null==t?void 0:t.number_format)!==a.y4.none&&!Number.isNaN(Number(e))&&Intl)try{return new Intl.NumberFormat(r,c(e,i)).format(Number(e))}catch(t){return console.error(t),new Intl.NumberFormat(void 0,c(e,i)).format(Number(e))}return!Number.isNaN(Number(e))&&""!==e&&(null==t?void 0:t.number_format)===a.y4.none&&Intl?new Intl.NumberFormat("en-US",c(e,{...i,useGrouping:!1})).format(Number(e)):"string"==typeof e?e:`${(0,n.N)(e,null==i?void 0:i.maximumFractionDigits).toString()}${"currency"===(null==i?void 0:i.style)?` ${i.currency}`:""}`},l=(e,t)=>{var i;const a=null==t?void 0:t.display_precision;return null!=a?{maximumFractionDigits:a,minimumFractionDigits:a}:Number.isInteger(Number(null==e||null===(i=e.attributes)||void 0===i?void 0:i.step))&&Number.isInteger(Number(null==e?void 0:e.state))?{maximumFractionDigits:0}:void 0},c=(e,t)=>{const i={maximumFractionDigits:2,...t};if("string"!=typeof e)return i;if(!t||void 0===t.minimumFractionDigits&&void 0===t.maximumFractionDigits){const t=e.indexOf(".")>-1?e.split(".")[1].length:0;i.minimumFractionDigits=t,i.maximumFractionDigits=t}return i}},68307:(e,t,i)=>{i.d(t,{K:()=>a});const a=e=>{switch(null==e?void 0:e.language){case"cz":case"de":case"fi":case"fr":case"sk":case"sv":return" ";default:return""}}},73366:(e,t,i)=>{i.d(t,{M:()=>c});var a=i(17463),n=i(34541),r=i(47838),s=i(61092),o=i(96762),d=i(68144),l=i(79932);let c=(0,a.Z)([(0,l.Mo)("ha-list-item")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"method",key:"renderRipple",value:function(){return this.noninteractive?"":(0,n.Z)((0,r.Z)(i.prototype),"renderRipple",this).call(this)}},{kind:"get",static:!0,key:"styles",value:function(){return[o.W,d.iv`:host{padding-left:var(--mdc-list-side-padding-left,var(--mdc-list-side-padding,20px));padding-right:var(--mdc-list-side-padding-right,var(--mdc-list-side-padding,20px))}:host([graphic=avatar]:not([twoLine])),:host([graphic=icon]:not([twoLine])){height:48px}span.material-icons:first-of-type{margin-inline-start:0px!important;margin-inline-end:var(--mdc-list-item-graphic-margin,16px)!important;direction:var(--direction)}span.material-icons:last-of-type{margin-inline-start:auto!important;margin-inline-end:0px!important;direction:var(--direction)}.mdc-deprecated-list-item__meta{display:var(--mdc-list-item-meta-display);align-items:center}:host([multiline-secondary]){height:auto}:host([multiline-secondary]) .mdc-deprecated-list-item__text{padding:8px 0}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text{text-overflow:initial;white-space:normal;overflow:auto;display:inline-block;margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text{margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text::before{display:none}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text::before{display:none}:host([disabled]){color:var(--disabled-text-color)}:host([noninteractive]){pointer-events:unset}`]}}]}}),s.K)},36226:(e,t,i)=>{var a=i(17463),n=i(67625),r=i(71711),s=i(68144),o=i(79932);(0,a.Z)([(0,o.Mo)("ha-top-app-bar-fixed")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",static:!0,key:"styles",value:()=>[r.W,s.iv`.mdc-top-app-bar__row{height:var(--header-height);border-bottom:var(--app-header-border-bottom)}.mdc-top-app-bar--fixed-adjust{padding-top:var(--header-height)}.mdc-top-app-bar{--mdc-typography-headline6-font-weight:400;color:var(--app-header-text-color,var(--mdc-theme-on-primary,#fff));background-color:var(--app-header-background-color,var(--mdc-theme-primary))}`]}]}}),n.s)},3542:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.r(t);var n=i(17463),r=i(34541),s=i(47838),o=i(72277),d=i(68144),l=i(79932),c=i(76680),u=i(85157),h=i(83849),m=i(69934),_=i(15493),g=i(87744),y=i(62336),v=i(77243),f=(i(31206),i(39143)),p=(i(10983),i(2315),i(48932),i(63681),i(36226),i(57066)),k=i(57292),b=i(74186),w=i(58763),D=i(41499),$=i(73826),x=i(11654),z=e([v,f,w]);[v,f,w]=z.then?(await z)():z;const Z="M14.76,20.83L17.6,18L14.76,15.17L16.17,13.76L19,16.57L21.83,13.76L23.24,15.17L20.43,18L23.24,20.83L21.83,22.24L19,19.4L16.17,22.24L14.76,20.83M12,12V19.88C12.04,20.18 11.94,20.5 11.71,20.71C11.32,21.1 10.69,21.1 10.3,20.71L8.29,18.7C8.06,18.47 7.96,18.16 8,17.87V12H7.97L2.21,4.62C1.87,4.19 1.95,3.56 2.38,3.22C2.57,3.08 2.78,3 3,3V3H17V3C17.22,3 17.43,3.08 17.62,3.22C18.05,3.56 18.13,4.19 17.79,4.62L12.03,12H12Z",L="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z";let I=(0,n.Z)(null,(function(e,t){class i extends t{constructor(){super(),e(this);const t=new Date;t.setHours(t.getHours()-1,0,0,0),this._startDate=t;const i=new Date;i.setHours(i.getHours()+2,0,0,0),this._endDate=i}}return{F:i,d:[{kind:"field",decorators:[(0,l.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,l.Cb)({reflect:!0,type:Boolean})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,l.Cb)({reflect:!0,type:Boolean})],key:"rtl",value:()=>!1},{kind:"field",decorators:[(0,l.SB)()],key:"_startDate",value:void 0},{kind:"field",decorators:[(0,l.SB)()],key:"_endDate",value:void 0},{kind:"field",decorators:[(0,u.t)({key:"historyPickedValue",state:!0,subscribe:!1})],key:"_targetPickerValue",value:void 0},{kind:"field",decorators:[(0,l.SB)()],key:"_isLoading",value:()=>!1},{kind:"field",decorators:[(0,l.SB)()],key:"_stateHistory",value:void 0},{kind:"field",decorators:[(0,l.SB)()],key:"_deviceEntityLookup",value:void 0},{kind:"field",decorators:[(0,l.SB)()],key:"_areaEntityLookup",value:void 0},{kind:"field",decorators:[(0,l.SB)()],key:"_areaDeviceLookup",value:void 0},{kind:"field",decorators:[(0,l.SB)()],key:"_showBack",value:void 0},{kind:"field",decorators:[(0,l.IO)("state-history-charts")],key:"_stateHistoryCharts",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"field",key:"_interval",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,r.Z)((0,s.Z)(i.prototype),"connectedCallback",this).call(this),this.hasUpdated&&this._getHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,r.Z)((0,s.Z)(i.prototype),"disconnectedCallback",this).call(this),this._unsubscribeHistory()}},{kind:"method",key:"hassSubscribe",value:function(){return[(0,b.LM)(this.hass.connection,(e=>{this._deviceEntityLookup=(0,k.pI)(e),this._areaEntityLookup=(0,p.TD)(e)})),(0,k.q4)(this.hass.connection,(e=>{this._areaDeviceLookup=(0,p.Dl)(e)}))]}},{kind:"method",key:"_goBack",value:function(){history.back()}},{kind:"method",key:"render",value:function(){return d.dy` <ha-top-app-bar-fixed> ${this._showBack?d.dy` <ha-icon-button-arrow-prev slot="navigationIcon" @click="${this._goBack}"></ha-icon-button-arrow-prev> `:d.dy` <ha-menu-button slot="navigationIcon" .hass="${this.hass}" .narrow="${this.narrow}"></ha-menu-button> `} <div slot="title">${this.hass.localize("panel.history")}</div> ${this._targetPickerValue?d.dy` <ha-icon-button slot="actionItems" @click="${this._removeAll}" .disabled="${this._isLoading}" .path="${Z}" .label="${this.hass.localize("ui.panel.history.remove_all")}"></ha-icon-button> `:""} <ha-icon-button slot="actionItems" @click="${this._getHistory}" .disabled="${this._isLoading||!this._targetPickerValue}" .path="${L}" .label="${this.hass.localize("ui.common.refresh")}"></ha-icon-button> <div class="flex content"> <div class="filters"> <ha-date-range-picker .hass="${this.hass}" ?disabled="${this._isLoading}" .startDate="${this._startDate}" .endDate="${this._endDate}" @change="${this._dateRangeChanged}"></ha-date-range-picker> <ha-target-picker .hass="${this.hass}" .value="${this._targetPickerValue}" .disabled="${this._isLoading}" addOnTop @value-changed="${this._targetsChanged}"></ha-target-picker> </div> ${this._isLoading?d.dy`<div class="progress-wrapper"> <ha-circular-progress active alt="${this.hass.localize("ui.common.loading")}"></ha-circular-progress> </div>`:this._targetPickerValue?d.dy` <state-history-charts .hass="${this.hass}" .historyData="${this._stateHistory}" .startTime="${this._startDate}" .endTime="${this._endDate}"> </state-history-charts> `:d.dy`<div class="start-search"> ${this.hass.localize("ui.panel.history.start_search")} </div>`} </div> </ha-top-app-bar-fixed> `}},{kind:"method",key:"willUpdate",value:function(e){if((0,r.Z)((0,s.Z)(i.prototype),"willUpdate",this).call(this,e),this.hasUpdated)return;const t=(0,_.Q2)(),a=t.entity_id,n=t.device_id,o=t.area_id;if((a||n||o)&&(this._targetPickerValue={}),a){const e=a.split(",");this._targetPickerValue.entity_id=e}if(n){const e=n.split(",");this._targetPickerValue.device_id=e}if(o){const e=o.split(",");this._targetPickerValue.area_id=e}const d=t.start_date;d&&(this._startDate=new Date(d));const l=t.end_date;l&&(this._endDate=new Date(l))}},{kind:"method",key:"firstUpdated",value:function(e){(0,r.Z)((0,s.Z)(i.prototype),"firstUpdated",this).call(this,e);"1"===(0,_.Q2)().back&&history.length>1&&(this._showBack=!0,(0,h.c)((0,m.q)((0,_.pc)("back")),{replace:!0}))}},{kind:"method",key:"updated",value:function(e){if(this._targetPickerValue&&(e.has("_startDate")||e.has("_endDate")||e.has("_targetPickerValue")||!this._stateHistory&&(e.has("_deviceEntityLookup")||e.has("_areaEntityLookup")||e.has("_areaDeviceLookup")))&&this._getHistory(),!e.has("hass")&&!e.has("_entities"))return;const t=e.get("hass");t&&t.language===this.hass.language||(this.rtl=(0,g.HE)(this.hass))}},{kind:"method",key:"_removeAll",value:function(){this._targetPickerValue=void 0,this._updatePath()}},{kind:"method",key:"_getHistory",value:async function(){if(!this._targetPickerValue)return;this._isLoading=!0;const e=this._getEntityIds();if(void 0===e)return this._isLoading=!1,void(this._stateHistory=void 0);if(0===e.length)return this._isLoading=!1,void(this._stateHistory={line:[],timeline:[]});this._subscribed&&this._unsubscribeHistory();const t=new Date,{numeric_device_classes:i}=await(0,D.ib)(this.hass);this._subscribed=(0,w.Vk)(this.hass,(e=>{this._isLoading=!1,this._stateHistory=(0,w.Nu)(this.hass,e,this.hass.localize,i)}),this._startDate,this._endDate,e),this._subscribed.catch((()=>{this._isLoading=!1,this._unsubscribeHistory()})),this._endDate>t&&this._setRedrawTimer()}},{kind:"method",key:"_setRedrawTimer",value:function(){clearInterval(this._interval);const e=new Date,t=this._endDate>e?e:this._endDate,i=(0,o.Z)(t,this._startDate);this._interval=window.setInterval((()=>{var e;return null===(e=this._stateHistoryCharts)||void 0===e?void 0:e.requestUpdate()}),i<2?1e4:i<10?6e4:y.Q)}},{kind:"method",key:"_unsubscribeHistory",value:function(){this._interval&&(clearInterval(this._interval),this._interval=void 0),this._subscribed&&(this._subscribed.then((e=>null==e?void 0:e())),this._subscribed=void 0)}},{kind:"method",key:"_getEntityIds",value:function(){if(!this._targetPickerValue||void 0===this._deviceEntityLookup||void 0===this._areaEntityLookup||void 0===this._areaDeviceLookup)return;const e=new Set;let{area_id:t,device_id:i,entity_id:a}=this._targetPickerValue;if(t){t=(0,c.r)(t);for(const i of t){const t=this._areaEntityLookup[i];if(null!=t&&t.length)for(const i of t)null===i.entity_category&&e.add(i.entity_id);const a=this._areaDeviceLookup[i];if(null!=a&&a.length)for(const t of a){const a=this._deviceEntityLookup[t.id];if(null!=a&&a.length)for(const t of a)t.area_id&&t.area_id!==i||null!==t.entity_category||e.add(t.entity_id)}}}if(i){i=(0,c.r)(i);for(const t of i){const i=this._deviceEntityLookup[t];if(null!=i&&i.length)for(const t of i)null===t.entity_category&&e.add(t.entity_id)}}if(a){a=(0,c.r)(a);for(const t of a)e.add(t)}return[...e]}},{kind:"method",key:"_dateRangeChanged",value:function(e){this._startDate=e.detail.startDate;const t=e.detail.endDate;0===t.getHours()&&0===t.getMinutes()&&(t.setDate(t.getDate()+1),t.setMilliseconds(t.getMilliseconds()-1)),this._endDate=t,this._updatePath()}},{kind:"method",key:"_targetsChanged",value:function(e){this._targetPickerValue=e.detail.value,this._updatePath()}},{kind:"method",key:"_updatePath",value:function(){const e={};this._targetPickerValue&&(this._targetPickerValue.entity_id&&(e.entity_id=(0,c.r)(this._targetPickerValue.entity_id).join(",")),this._targetPickerValue.area_id&&(e.area_id=(0,c.r)(this._targetPickerValue.area_id).join(",")),this._targetPickerValue.device_id&&(e.device_id=(0,c.r)(this._targetPickerValue.device_id).join(","))),this._startDate&&(e.start_date=this._startDate.toISOString()),this._endDate&&(e.end_date=this._endDate.toISOString()),(0,h.c)(`/history?${(0,_.ou)(e)}`,{replace:!0})}},{kind:"get",static:!0,key:"styles",value:function(){return[x.Qx,d.iv`.content{padding:0 16px 16px;padding-bottom:max(env(safe-area-inset-bottom),16px)}:host([virtualize]){height:100%}.progress-wrapper{position:relative;display:flex;align-items:center;flex-direction:column;padding:16px}.filters{display:flex;align-items:flex-start;margin-top:16px}ha-date-range-picker{margin-right:16px;margin-inline-end:16px;margin-inline-start:initial;max-width:100%;direction:var(--direction)}@media all and (max-width:1025px){.filters{flex-direction:column}ha-date-range-picker{margin-right:0;margin-inline-end:0;width:100%}}.start-search{padding-top:16px;text-align:center;color:var(--secondary-text-color)}`]}}]}}),(0,$.f)(d.oi));customElements.define("ha-panel-history",I),a()}catch(e){a(e)}}))},4631:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.r(t);var n=i(43170),r=i(27499),s=i(32812),o=i(27815),d=i(64532),l=i(82874),c=i(69906),u=i(24517);const e=async()=>{const e=(0,c.sS)(),t=[];(0,s.Y)()&&await Promise.all([i.e(77021),i.e(48196)]).then(i.bind(i,48196)),(0,o.Y)(e)&&t.push(Promise.all([i.e(77021),i.e(20655)]).then(i.bind(i,20655))),(0,d.Y)(e)&&t.push(Promise.all([i.e(77021),i.e(20759)]).then(i.bind(i,20759))),(0,n.Y)(e)&&t.push(Promise.all([i.e(77021),i.e(76554)]).then(i.bind(i,76554)).then((()=>(0,u.H)()))),(0,r.Yq)(e)&&t.push(Promise.all([i.e(77021),i.e(72684)]).then(i.bind(i,72684))),(0,l.Y)(e)&&t.push(Promise.all([i.e(77021),i.e(69029)]).then(i.bind(i,69029))),0!==t.length&&await Promise.all(t).then((()=>(0,u.n)(e)))};await e(),a()}catch(e){a(e)}}),1)},44281:(e,t,i)=>{i.d(t,{j:()=>a});const a=async()=>{try{new ResizeObserver((()=>{}))}catch(e){window.ResizeObserver=(await i.e(5442).then(i.bind(i,5442))).default}}}};
//# sourceMappingURL=56418-5kciQabER9E.js.map