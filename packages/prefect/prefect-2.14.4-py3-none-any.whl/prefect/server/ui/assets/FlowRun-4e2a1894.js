import{d as h,f as m,e as f,o as t,l as j,P as R,m as _,u as a,ag as q,ah as D,a7 as L,_ as V,B as A,R as G,ai as O,aj as Y,ak as $,I as z,al as M,w as Q,am as X,an as H,ao as J,h as g,c as o,i as u,ap as K,a as r,aq as W,ar as Z,as as ee,at as ae,au as le,av as se,aw as te,x as ne,af as b,ax as oe}from"./index-1097d93a.js";import{u as ue}from"./usePageTitle-553ea375.js";const re={class:"flow-run-graphs__graphs"},fe={class:"flow-run-graphs__panel p-background"},pe=h({__name:"FlowRunGraphs",props:{flowRun:{}},setup(k){const d=m(),p=m(!1),e=m(null),i=f(()=>({root:{"flow-run-graphs--fullscreen":p.value,"flow-run-graphs--show-panel":!!e.value}}));return(v,n)=>(t(),j("div",{class:L(["flow-run-graphs",i.value.root])},[R("div",re,[_(a(q),{fullscreen:p.value,"onUpdate:fullscreen":n[0]||(n[0]=s=>p.value=s),viewport:d.value,"onUpdate:viewport":n[1]||(n[1]=s=>d.value=s),selected:e.value,"onUpdate:selected":n[2]||(n[2]=s=>e.value=s),"flow-run":v.flowRun,class:"flow-run-graphs__flow-run"},null,8,["fullscreen","viewport","selected","flow-run"])]),R("div",fe,[_(a(D),{node:e.value,"onUpdate:node":n[3]||(n[3]=s=>e.value=s),floating:p.value},null,8,["node","floating"])])],2))}});const ie=h({__name:"FlowRun",setup(k){const d=V(),p=A("flowRunId");G();const{flowRun:e,subscription:i}=O(p,{interval:5e3}),v=f(()=>{var l;return(l=e.value)==null?void 0:l.deploymentId}),{deployment:n}=Y(v),s=f(()=>{var l;return(l=e.value)!=null&&l.stateType?$(e.value.stateType):!0}),x=f(()=>[{label:"Logs"},{label:"Task Runs",hidden:s.value},{label:"Subflow Runs",hidden:s.value},{label:"Results",hidden:s.value},{label:"Artifacts",hidden:s.value},{label:"Details"},{label:"Parameters"}]),c=z("tab","Logs"),{tabs:T}=M(x,c);Q(p,(l,w)=>{l!==w&&(c.value="Logs")});const F=f(()=>{var l;return((l=e.value)==null?void 0:l.parameters)??{}}),I=f(()=>{var l;return((l=n.value)==null?void 0:l.parameterOpenApiSchema)??{}}),y=f(()=>X(F.value,I.value));function B(){d.push(b.flowRuns())}const S=f(()=>{var l;return(l=e.value)==null?void 0:l.stateType});H(S);const C=f(()=>e.value?`Flow Run: ${e.value.name}`:"Flow Run");return ue(C),J(()=>{i.error&&oe(i.error).isInRange("clientError")&&d.replace(b[404]())}),(l,w)=>{const N=g("p-code-highlight"),P=g("p-tabs"),U=g("p-layout-default");return t(),o(U,{class:"flow-run"},{header:u(()=>[a(e)?(t(),o(a(K),{key:0,"flow-run-id":a(e).id,onDelete:B},null,8,["flow-run-id"])):r("",!0)]),default:u(()=>[a(e)&&!s.value?(t(),o(pe,{key:0,"flow-run":a(e)},null,8,["flow-run"])):r("",!0),_(P,{selected:a(c),"onUpdate:selected":w[0]||(w[0]=E=>ne(c)?c.value=E:null),tabs:a(T)},{details:u(()=>[a(e)?(t(),o(a(W),{key:0,"flow-run":a(e)},null,8,["flow-run"])):r("",!0)]),logs:u(()=>[a(e)?(t(),o(a(Z),{key:0,"flow-run":a(e)},null,8,["flow-run"])):r("",!0)]),results:u(()=>[a(e)?(t(),o(a(ee),{key:0,"flow-run":a(e)},null,8,["flow-run"])):r("",!0)]),artifacts:u(()=>[a(e)?(t(),o(a(ae),{key:0,"flow-run":a(e)},null,8,["flow-run"])):r("",!0)]),"task-runs":u(()=>[a(e)?(t(),o(a(le),{key:0,"flow-run-id":a(e).id},null,8,["flow-run-id"])):r("",!0)]),"subflow-runs":u(()=>[a(e)?(t(),o(a(se),{key:0,"flow-run-id":a(e).id},null,8,["flow-run-id"])):r("",!0)]),parameters:u(()=>[a(e)?(t(),o(a(te),{key:0,"text-to-copy":y.value},{default:u(()=>[_(N,{lang:"json",text:y.value,class:"flow-run__parameters"},null,8,["text"])]),_:1},8,["text-to-copy"])):r("",!0)]),_:1},8,["selected","tabs"])]),_:1})}}});export{ie as default};
