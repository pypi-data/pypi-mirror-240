import{b0 as v,d as b,R as g,B as I,_ as N,I as k,aj as B,e as S,h as x,u as e,c as D,i as m,a as F,o as J,m as p,b1 as T,b2 as O,b3 as M,b4 as P,af as d,a_ as i}from"./index-1097d93a.js";import{u as U}from"./usePageTitle-553ea375.js";class V extends v{parse(t){return JSON.parse(decodeURIComponent(t??""))}format(t){return encodeURIComponent(JSON.stringify(t))}}const Q=b({__name:"FlowRunCreate",setup(f){const t=g(),n=I("deploymentId"),s=N(),y=k("parameters",V,void 0),{deployment:o}=B(n),_=async r=>{var u,a;try{const l=await t.deployments.createDeploymentFlowRun(n.value,r),c=((a=(u=r.state)==null?void 0:u.stateDetails)==null?void 0:a.scheduledTime)??void 0,C=!c,h=M(P,{flowRun:l,flowRunRoute:d.flowRun,router:s,immediate:C,startTime:c});i(h,"success"),s.push(d.deployment(n.value))}catch(l){i("Something went wrong trying to create a flow run","error"),console.error(l)}},R=()=>{s.back()},w=S(()=>o.value?`Create Flow Run for Deployment: ${o.value.name}`:"Create Flow Run for Deployment");return U(w),(r,u)=>{const a=x("p-layout-default");return e(o)?(J(),D(a,{key:0},{header:m(()=>[p(e(T),{deployment:e(o)},null,8,["deployment"])]),default:m(()=>[p(e(O),{deployment:e(o),parameters:e(y),onSubmit:_,onCancel:R},null,8,["deployment","parameters"])]),_:1})):F("",!0)}}});export{Q as default};
