{"version":3,"file":"c57cd984.js","mappings":";;AAuCA;;AAIA;;;AAGA;AAEA;;AAGA;;AAEA;;;;AAKA;;;AAIA;;AAGA;;AAEA;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;ACvFA;;AAGA;AACA;;;AAGA;AAEA;;AAOA;AACA;;;AAKA;;AAGA;AACA;;;AA9BA;;;;;;;;;;;;;AA2DA","sources":["webpack://home-assistant-frontend/./src/components/ha-attributes.ts","webpack://home-assistant-frontend/./src/dialogs/more-info/controls/more-info-person.ts"],"sourcesContent":["import { HassEntity } from \"home-assistant-js-websocket\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport {\n  formatAttributeName,\n  formatAttributeValue,\n  STATE_ATTRIBUTES,\n} from \"../data/entity_attributes\";\nimport { haStyle } from \"../resources/styles\";\nimport { HomeAssistant } from \"../types\";\n\nimport \"./ha-expansion-panel\";\n\n@customElement(\"ha-attributes\")\nclass HaAttributes extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property() public stateObj?: HassEntity;\n\n  @property({ attribute: \"extra-filters\" }) public extraFilters?: string;\n\n  @state() private _expanded = false;\n\n  protected render(): TemplateResult {\n    if (!this.stateObj) {\n      return html``;\n    }\n\n    const attributes = this.computeDisplayAttributes(\n      STATE_ATTRIBUTES.concat(\n        this.extraFilters ? this.extraFilters.split(\",\") : []\n      )\n    );\n    if (attributes.length === 0) {\n      return html``;\n    }\n\n    return html`\n      <ha-expansion-panel\n        .header=${this.hass.localize(\n          \"ui.components.attributes.expansion_header\"\n        )}\n        outlined\n        @expanded-will-change=${this.expandedChanged}\n      >\n        <div class=\"attribute-container\">\n          ${this._expanded\n            ? html`\n                ${attributes.map(\n                  (attribute) => html`\n                    <div class=\"data-entry\">\n                      <div class=\"key\">${formatAttributeName(attribute)}</div>\n                      <div class=\"value\">\n                        ${this.formatAttribute(attribute)}\n                      </div>\n                    </div>\n                  `\n                )}\n              `\n            : \"\"}\n        </div>\n      </ha-expansion-panel>\n      ${this.stateObj.attributes.attribution\n        ? html`\n            <div class=\"attribution\">\n              ${this.stateObj.attributes.attribution}\n            </div>\n          `\n        : \"\"}\n    `;\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      css`\n        .attribute-container {\n          margin-bottom: 8px;\n          direction: ltr;\n        }\n        .data-entry {\n          display: flex;\n          flex-direction: row;\n          justify-content: space-between;\n        }\n        .data-entry .value {\n          max-width: 60%;\n          overflow-wrap: break-word;\n          text-align: right;\n        }\n        .key {\n          flex-grow: 1;\n        }\n        .attribution {\n          color: var(--secondary-text-color);\n          text-align: center;\n          margin-top: 16px;\n        }\n        pre {\n          font-family: inherit;\n          font-size: inherit;\n          margin: 0px;\n          overflow-wrap: break-word;\n          white-space: pre-line;\n        }\n        hr {\n          border-color: var(--divider-color);\n          border-bottom: none;\n          margin: 16px 0;\n        }\n      `,\n    ];\n  }\n\n  private computeDisplayAttributes(filtersArray: string[]): string[] {\n    if (!this.stateObj) {\n      return [];\n    }\n    return Object.keys(this.stateObj.attributes).filter(\n      (key) => filtersArray.indexOf(key) === -1\n    );\n  }\n\n  private formatAttribute(attribute: string): string | TemplateResult {\n    if (!this.stateObj) {\n      return \"â€”\";\n    }\n    const value = this.stateObj.attributes[attribute];\n    return formatAttributeValue(this.hass, value);\n  }\n\n  private expandedChanged(ev) {\n    this._expanded = ev.detail.expanded;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-attributes\": HaAttributes;\n  }\n}\n","import \"@material/mwc-button\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport \"../../../components/ha-attributes\";\nimport \"../../../components/map/ha-map\";\nimport { showZoneEditor } from \"../../../data/zone\";\nimport { HomeAssistant } from \"../../../types\";\n\n@customElement(\"more-info-person\")\nclass MoreInfoPerson extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property() public stateObj?: HassEntity;\n\n  private _entityArray = memoizeOne((entityId: string) => [entityId]);\n\n  protected render(): TemplateResult {\n    if (!this.hass || !this.stateObj) {\n      return html``;\n    }\n\n    return html`\n      ${this.stateObj.attributes.latitude && this.stateObj.attributes.longitude\n        ? html`\n            <ha-map\n              .hass=${this.hass}\n              .entities=${this._entityArray(this.stateObj.entity_id)}\n              autoFit\n            ></ha-map>\n          `\n        : \"\"}\n      ${!__DEMO__ &&\n      this.hass.user?.is_admin &&\n      this.stateObj.state === \"not_home\" &&\n      this.stateObj.attributes.latitude &&\n      this.stateObj.attributes.longitude\n        ? html`\n            <div class=\"actions\">\n              <mwc-button @click=${this._handleAction}>\n                ${this.hass.localize(\n                  \"ui.dialogs.more_info_control.person.create_zone\"\n                )}\n              </mwc-button>\n            </div>\n          `\n        : \"\"}\n      <ha-attributes\n        .hass=${this.hass}\n        .stateObj=${this.stateObj}\n        extra-filters=\"id,user_id,editable\"\n      ></ha-attributes>\n    `;\n  }\n\n  private _handleAction() {\n    showZoneEditor({\n      latitude: this.stateObj!.attributes.latitude,\n      longitude: this.stateObj!.attributes.longitude,\n    });\n    fireEvent(this, \"hass-more-info\", { entityId: null });\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      .flex {\n        display: flex;\n        justify-content: space-between;\n      }\n      .actions {\n        margin: 8px 0;\n        text-align: right;\n      }\n      ha-map {\n        margin-top: 16px;\n        margin-bottom: 16px;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"more-info-person\": MoreInfoPerson;\n  }\n}\n"],"names":[],"sourceRoot":""}