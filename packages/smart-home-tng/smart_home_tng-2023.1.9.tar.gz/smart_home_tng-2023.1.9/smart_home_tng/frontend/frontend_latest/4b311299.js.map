{"version":3,"file":"4b311299.js","mappings":";;AAqBA;AACA;AACA;AACA;;;;AAIA;;AAIA;;;;;AAUA;;AAdA;AAmBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;;;AA5HA;;;;AAsIA;;;;AAoBA","sources":["webpack://home-assistant-frontend/./src/components/buttons/ha-progress-button.ts","webpack://home-assistant-frontend/./src/panels/config/integrations/integration-panels/zha/zha-groups-dashboard.ts"],"sourcesContent":["import \"@material/mwc-button\";\nimport { mdiAlertOctagram, mdiCheckBold } from \"@mdi/js\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport \"../ha-circular-progress\";\nimport \"../ha-svg-icon\";\n\n@customElement(\"ha-progress-button\")\nexport class HaProgressButton extends LitElement {\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public progress = false;\n\n  @property({ type: Boolean }) public raised = false;\n\n  @state() private _result?: \"success\" | \"error\";\n\n  public render(): TemplateResult {\n    const overlay = this._result || this.progress;\n    return html`\n      <mwc-button\n        ?raised=${this.raised}\n        .disabled=${this.disabled || this.progress}\n        @click=${this._buttonTapped}\n        class=${this._result || \"\"}\n      >\n        <slot></slot>\n      </mwc-button>\n      ${!overlay\n        ? \"\"\n        : html`\n            <div class=\"progress\">\n              ${this._result === \"success\"\n                ? html`<ha-svg-icon .path=${mdiCheckBold}></ha-svg-icon>`\n                : this._result === \"error\"\n                ? html`<ha-svg-icon .path=${mdiAlertOctagram}></ha-svg-icon>`\n                : this.progress\n                ? html`\n                    <ha-circular-progress\n                      size=\"small\"\n                      active\n                    ></ha-circular-progress>\n                  `\n                : \"\"}\n            </div>\n          `}\n    `;\n  }\n\n  public actionSuccess(): void {\n    this._setResult(\"success\");\n  }\n\n  public actionError(): void {\n    this._setResult(\"error\");\n  }\n\n  private _setResult(result: \"success\" | \"error\"): void {\n    this._result = result;\n    setTimeout(() => {\n      this._result = undefined;\n    }, 2000);\n  }\n\n  private _buttonTapped(ev: Event): void {\n    if (this.progress) {\n      ev.stopPropagation();\n    }\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host {\n        outline: none;\n        display: inline-block;\n        position: relative;\n      }\n\n      mwc-button {\n        transition: all 1s;\n      }\n\n      mwc-button.success {\n        --mdc-theme-primary: white;\n        background-color: var(--success-color);\n        transition: none;\n        border-radius: 4px;\n        pointer-events: none;\n      }\n\n      mwc-button[raised].success {\n        --mdc-theme-primary: var(--success-color);\n        --mdc-theme-on-primary: white;\n      }\n\n      mwc-button.error {\n        --mdc-theme-primary: white;\n        background-color: var(--error-color);\n        transition: none;\n        border-radius: 4px;\n        pointer-events: none;\n      }\n\n      mwc-button[raised].error {\n        --mdc-theme-primary: var(--error-color);\n        --mdc-theme-on-primary: white;\n      }\n\n      .progress {\n        bottom: 4px;\n        position: absolute;\n        text-align: center;\n        top: 4px;\n        width: 100%;\n      }\n\n      ha-svg-icon {\n        color: white;\n      }\n\n      mwc-button.success slot,\n      mwc-button.error slot {\n        visibility: hidden;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-progress-button\": HaProgressButton;\n  }\n}\n","import \"@material/mwc-button\";\nimport { mdiPlus } from \"@mdi/js\";\nimport {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n} from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { HASSDomEvent } from \"../../../../../common/dom/fire_event\";\nimport { navigate } from \"../../../../../common/navigate\";\nimport {\n  DataTableColumnContainer,\n  RowClickedEvent,\n} from \"../../../../../components/data-table/ha-data-table\";\nimport \"../../../../../components/ha-fab\";\nimport \"../../../../../components/ha-icon-button\";\nimport { fetchGroups, ZHADevice, ZHAGroup } from \"../../../../../data/zha\";\nimport \"../../../../../layouts/hass-tabs-subpage-data-table\";\nimport { haStyle } from \"../../../../../resources/styles\";\nimport { HomeAssistant, Route } from \"../../../../../types\";\nimport { formatAsPaddedHex, sortZHAGroups } from \"./functions\";\nimport { zhaTabs } from \"./zha-config-dashboard\";\n\nexport interface GroupRowData extends ZHAGroup {\n  group?: GroupRowData;\n  id?: string;\n}\n\n@customElement(\"zha-groups-dashboard\")\nexport class ZHAGroupsDashboard extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Object }) public route!: Route;\n\n  @property({ type: Boolean }) public narrow!: boolean;\n\n  @property({ type: Boolean }) public isWide!: boolean;\n\n  @property() public _groups: ZHAGroup[] = [];\n\n  private _firstUpdatedCalled = false;\n\n  public connectedCallback(): void {\n    super.connectedCallback();\n    if (this.hass && this._firstUpdatedCalled) {\n      this._fetchGroups();\n    }\n  }\n\n  protected firstUpdated(changedProperties: PropertyValues): void {\n    super.firstUpdated(changedProperties);\n    if (this.hass) {\n      this._fetchGroups();\n    }\n    this._firstUpdatedCalled = true;\n  }\n\n  private _formattedGroups = memoizeOne((groups: ZHAGroup[]) => {\n    let outputGroups: GroupRowData[] = groups;\n\n    outputGroups = outputGroups.map((group) => ({\n      ...group,\n      id: String(group.group_id),\n    }));\n\n    return outputGroups;\n  });\n\n  private _columns = memoizeOne(\n    (narrow: boolean): DataTableColumnContainer =>\n      narrow\n        ? {\n            name: {\n              title: \"Group\",\n              sortable: true,\n              filterable: true,\n              direction: \"asc\",\n              grows: true,\n            },\n          }\n        : {\n            name: {\n              title: this.hass.localize(\"ui.panel.config.zha.groups.groups\"),\n              sortable: true,\n              filterable: true,\n              direction: \"asc\",\n              grows: true,\n            },\n            group_id: {\n              title: this.hass.localize(\"ui.panel.config.zha.groups.group_id\"),\n              type: \"numeric\",\n              width: \"15%\",\n              template: (groupId: number) =>\n                html` ${formatAsPaddedHex(groupId)} `,\n              sortable: true,\n            },\n            members: {\n              title: this.hass.localize(\"ui.panel.config.zha.groups.members\"),\n              type: \"numeric\",\n              width: \"15%\",\n              template: (members: ZHADevice[]) => html` ${members.length} `,\n              sortable: true,\n            },\n          }\n  );\n\n  protected render(): TemplateResult {\n    return html`\n      <hass-tabs-subpage-data-table\n        .tabs=${zhaTabs}\n        .hass=${this.hass}\n        .narrow=${this.narrow}\n        .route=${this.route}\n        .columns=${this._columns(this.narrow)}\n        .data=${this._formattedGroups(this._groups)}\n        @row-click=${this._handleRowClicked}\n        clickable\n      >\n        <a href=\"/config/zha/group-add\" slot=\"fab\">\n          <ha-fab\n            .label=${this.hass!.localize(\n              \"ui.panel.config.zha.groups.add_group\"\n            )}\n            extended\n          >\n            <ha-svg-icon slot=\"icon\" .path=${mdiPlus}></ha-svg-icon>\n          </ha-fab>\n        </a>\n      </hass-tabs-subpage-data-table>\n    `;\n  }\n\n  private async _fetchGroups() {\n    this._groups = (await fetchGroups(this.hass!)).sort(sortZHAGroups);\n  }\n\n  private _handleRowClicked(ev: HASSDomEvent<RowClickedEvent>) {\n    const groupId = ev.detail.id;\n    navigate(`/config/zha/group/${groupId}`);\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      css`\n        a {\n          color: var(--primary-color);\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"zha-groups-dashboard\": ZHAGroupsDashboard;\n  }\n}\n"],"names":[],"sourceRoot":""}