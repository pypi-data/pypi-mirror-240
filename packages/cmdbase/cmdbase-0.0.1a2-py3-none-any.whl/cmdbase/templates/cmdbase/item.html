{% extends 'cmdbase/base.html' %}
{% load i18n static %}

{% block title %}{{ item.name }} ({{ item.category }}){% endblock %}

{% block content %}
<h1>{{ item.name }}</h1>
<h4><a href="{{ item.category.get_absolute_url }}">{{ item.category }}</a></h4>

<ul class="nav nav-tabs">
    <li class="nav-item"><a class="nav-link{% if tab == 'properties' %} active{% endif %}" aria-current="page" href="{{ item.get_absolute_url }}">Properties</a></li>
    <li class="nav-item"><a class="nav-link{% if tab == 'relations' %} active{% endif %}" href="{% url 'cmdbase:item_relation_list' item.category.slug item.slug %}">Relations <span class="text-secondary">({{ relations_count }})</span></a></li>
    <li class="nav-item"><a class="nav-link{% if tab == 'issues' %} active{% endif %}" href="{% url 'cmdbase:item_issue_list' item.category.slug item.slug %}">Issues <span class="{% if item.issue_set.count > 0 %}text-danger{% else %}text-secondary{% endif %}">({{ item.issue_set.count }})</span></a></li>
    <li class="nav-item"><a class="nav-link{% if tab == 'reports' %} active{% endif %}" href="{% url 'cmdbase:item_report_list' item.category.slug item.slug %}">Reports <span class="text-secondary">({{ item.reportitem_set.count }})</span></a></a></li>
</ul>

{% if tab == 'properties' %}

    {% include 'cmdbase/item_properties.html' %}

{% elif tab == 'relations' %}

    {% include 'cmdbase/item_relations.html' %}

{% elif tab == 'issues' %}

    {% include 'cmdbase/item_issues.html' %}

{% elif tab == 'reports' %}

    {% include 'cmdbase/item_reports.html' %}

{% endif %}

{% endblock %}
